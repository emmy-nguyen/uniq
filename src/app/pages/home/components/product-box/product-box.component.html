<mat-card
  *ngIf="product"
  [class]="getCardClasses()"
  [ngClass]="{
    'text-center': !fullWidthMode,
    '!hover:scale-100 w-full': isMobile
  }"
>
  <div
    [ngClass]="{
      '!flex !flex-row gap-6 justify-center items-center':
        fullWidthMode && !isMobile,
      'flex flex-col': !fullWidthMode || isMobile
    }"
  >
    <!-- Product image -->
    <div class="relative overflow-hidden" [class]="getImageClasses()">
      <img
        class="w-full object-cover transition-transform duration-500 !mb-0"
        [class.group-hover:scale-110]="!isMobile"
        [class.h-full]="true"
        [src]="product.image"
        [alt]="product.title"
      />
    </div>

    <!-- Product details -->
    <div [class]="getContentClasses()">
      <div class="flex-1">
        <!-- Category -->
        <h5
          class="!text-[10px] !font-semibold !uppercase !tracking-wide !text-gray-600 !mb-2 !border-b border-[#e04639] !px-2 !py-1 !inline-block"
          [class.!text-[8px]]="isMobile"
        >
          {{ product.category }}
        </h5>

        <!-- Product title -->
        <p [class]="getTitleClasses()">
          {{ product.title }}
        </p>

        <!-- Description - Full width mode only, hide on mobile -->
        <p
          *ngIf="fullWidthMode && !isMobile"
          class="!text-gray-600 !text-sm !mb-4 !leading-relaxed !line-clamp-3"
        >
          {{ product.description }}
        </p>
      </div>

      <!-- Price and Add to Cart -->
      <div
        class="flex justify-between items-center !mt-4 !pt-4"
        [class.flex-col]="isMobile && !fullWidthMode"
        [class.gap-3]="isMobile && !fullWidthMode"
      >
        <div
          class="flex flex-col"
          [ngClass]="{
            '!items-center': !fullWidthMode && !isMobile,
            '!items-start': isMobile || fullWidthMode
          }"
        >
          <span
            class="!font-semibold !text-gray-500 !mb-1"
            [class.!text-lg]="!isMobile"
            [class.!text-base]="isMobile"
          >
            {{ product.price | currency }}
          </span>
        </div>

        <button
          (click)="onAddToCart()"
          class="!flex !items-center !justify-center !gap-2 !font-semibold !rounded-full !transition-all !duration-200 hover:!scale-105 hover:!shadow-md !border-0 !min-w-0 group-hover:!animate-pulse"
          [class.!px-4]="isMobile && !fullWidthMode"
          [class.!py-0]="isMobile && !fullWidthMode"
          [class.!px-4]="!isMobile || fullWidthMode"
          [class.!py-1]="!isMobile || fullWidthMode"
          [class.!w-full]="isMobile && !fullWidthMode"
          [class.bg-[#f9c273]]="true"
          [class.!text-white]="true"
          mat-raised-button
        >
          <mat-icon
            class="text-white"
            [class.mr-2]="isMobile && !fullWidthMode"
          >
            shopping_bag
          </mat-icon>
          <span *ngIf="isMobile && !fullWidthMode" class="text-sm font-medium">
            Add to Cart
          </span>
        </button>
      </div>
    </div>
  </div>
</mat-card>
